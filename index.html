<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ¤– AI Spam Detector</title>
<style>
  :root {
    --bg-color: #0f2027;
    --bg-gradient: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    --text-color: #fff;
    --accent: #00ffcc;
    --shadow: rgba(0,255,204,0.3);
  }
  body.light {
    --bg-color: #f5f5f5;
    --bg-gradient: linear-gradient(135deg,#e0e0e0,#fafafa,#fff);
    --text-color: #111;
    --accent: #00796b;
    --shadow: rgba(0,121,107,0.2);
  }
  body {
    margin:0; font-family: Arial, sans-serif;
    background: var(--bg-gradient);
    color: var(--text-color);
    display:flex; justify-content:center; align-items:center;
    min-height:100vh; transition: 0.5s all;
  }
  .container {
    width: 100%; max-width: 500px; text-align:center;
    background: rgba(255,255,255,0.1); backdrop-filter: blur(12px);
    border-radius: 20px; padding: 30px;
    box-shadow: 0 0 25px var(--shadow);
  }
  h1 { color: var(--accent); margin-bottom: 5px; }
  p.tagline { margin-top:0; opacity:0.8; margin-bottom:20px; }
  textarea { width:100%; min-height:120px; padding:12px; border:none; border-radius:10px; margin-bottom:10px; background:rgba(255,255,255,0.12); color:inherit; outline:none; }
  button { padding:12px 25px; border:none; border-radius:10px; cursor:pointer; background: var(--accent); font-size:16px; color:#000; transition:0.3s; }
  button:hover { transform:scale(1.05); box-shadow:0 0 15px var(--accent);}
  .result { margin-top:20px; padding:15px; border-radius:10px; background: rgba(0,0,0,0.25); text-align:left; line-height:1.5; }
  mark { background-color: #ff006e; color: #fff; padding:2px 4px; border-radius:3px; }
  /* Theme toggle */
  .theme-toggle { position:absolute; top:20px; right:25px; }
  .switch { width:50px; height:25px; background: rgba(255,255,255,0.2); border-radius:20px; position:relative; display:inline-block; cursor:pointer; }
  .switch::before { content:""; width:20px; height:20px; background: var(--accent); border-radius:50%; position:absolute; top:2.5px; left:4px; transition:0.3s; }
  input:checked + .switch::before { transform: translateX(25px); background:#ffcc00; }
</style>
</head>
<body>
  <div class="theme-toggle">
    <input type="checkbox" id="themeSwitch">
    <label for="themeSwitch" class="switch"></label>
  </div>

  <div class="container">
    <h1>ðŸ¤– AI Spam Email Detector</h1>
    <p class="tagline">Machine Learning & NLP Powered</p>

    <form method="POST">
      <textarea name="message" placeholder="Type your message here..." required>{{ request.form.get('message','') }}</textarea>
      <br>
      <button type="submit">Analyze</button>
    </form>

    {% if prediction %}
    <div class="result">
      <h2>ðŸ“Š Analysis Result</h2>
      <p><strong>Prediction:</strong> {{ prediction }}</p>
      <p><strong>Confidence:</strong> {{ confidence }}%</p>
      <p><strong>Spam Words Detected:</strong> {{ detected_words | join(', ') if detected_words else 'None' }}</p>
      <p><strong>Message:</strong></p>
      <p>{{ highlighted_message | safe }}</p>
    </div>
    {% endif %}
  </div>

  <script>
    const themeSwitch = document.getElementById("themeSwitch");
    themeSwitch.addEventListener("change", ()=>{
      document.body.classList.toggle("light");
      localStorage.setItem("theme", document.body.classList.contains("light") ? "light" : "dark");
    });
    window.onload = ()=>{
      if(localStorage.getItem("theme")==="light"){ document.body.classList.add("light"); themeSwitch.checked=true; }
    };
  </script>
</body>
</html>
